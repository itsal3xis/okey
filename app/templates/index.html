<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>okey â€” NHL stats</title>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;800&display=swap" rel="stylesheet">
    <style>
      :root{--bg:#071028;--card:#0b1220;--muted:#9fb0c9;--accent:#1fb6ff;--glass:rgba(255,255,255,0.04)}
      *{box-sizing:border-box}
      html,body{height:100%}
      body{font-family:Inter,system-ui,-apple-system,Segoe UI,Roboto,"Helvetica Neue",Arial;color:#e6f0fb;background:radial-gradient(1200px 600px at 10% 10%, rgba(31,80,140,0.12), transparent), linear-gradient(180deg,#041026 0%,#071028 100%);margin:0}
      .wrap{max-width:1200px;margin:36px auto;padding:20px}
      .hero{display:grid;grid-template-columns:360px 1fr;gap:28px;align-items:center}
      .player-card{background:linear-gradient(180deg,rgba(255,255,255,0.02),rgba(255,255,255,0.01));border-radius:16px;padding:22px;backdrop-filter:blur(6px);border:1px solid var(--glass);position:relative;overflow:hidden}
      .headshot{width:300px;height:300px;border-radius:18px;background:linear-gradient(135deg,#08304a,#03203a);display:flex;align-items:center;justify-content:center;color:#99ddff;font-weight:800;font-size:26px;box-shadow:0 10px 30px rgba(2,8,20,0.6);transform:translateY(0);transition:transform .45s cubic-bezier(.2,.9,.2,1)}
      .headshot img{width:100%;height:100%;object-fit:cover;border-radius:12px}
      .meta{padding:6px 0}
      .meta h2{margin:6px 0 0 0;font-size:30px;letter-spacing:-0.01em}
      .meta .sub{color:var(--muted);margin-top:6px}
      .follow{margin-top:14px;display:inline-block;padding:10px 14px;border-radius:999px;background:linear-gradient(90deg,var(--accent),#7de2ff);color:#012034;font-weight:700;text-decoration:none}

      .stats-grid{display:flex;gap:12px;margin-top:16px}
      .stat{flex:1;background:rgba(255,255,255,0.02);padding:12px;border-radius:12px;text-align:center;border:1px solid rgba(255,255,255,0.03)}
      .stat .num{font-size:22px;font-weight:800}
      .stat .label{font-size:12px;color:var(--muted);margin-top:6px}

      .panel{background:linear-gradient(180deg,rgba(255,255,255,0.015),transparent);border-radius:12px;padding:18px;border:1px solid rgba(255,255,255,0.03)}

      /* animations */
      @keyframes floatY{0%{transform:translateY(0)}50%{transform:translateY(-10px)}100%{transform:translateY(0)}}
      .headshot.animate{animation:floatY 4s ease-in-out infinite}
      .reveal{opacity:0;transform:translateY(12px);animation:reveal .6s forwards}
      .reveal.delay-1{animation-delay:.08s}
      .reveal.delay-2{animation-delay:.16s}
      @keyframes reveal{to{opacity:1;transform:none}}

      /* responsive */
      @media (max-width:920px){.hero{grid-template-columns:1fr;gap:18px}.headshot{width:240px;height:240px}}
    </style>
    <script>
      // Counter animation
      function animateCounters(){
        document.querySelectorAll('.num[data-target]').forEach(el=>{
          const target = Number(el.dataset.target)||0;
          const dur = 900;
          let start = null;
          function step(ts){
            if(!start) start=ts;
            const prog = Math.min((ts-start)/dur,1);
            el.textContent = Math.floor(prog*target).toLocaleString();
            if(prog<1) requestAnimationFrame(step);
            else el.textContent = target.toLocaleString();
          }
          requestAnimationFrame(step);
        });
      }
      // small parallax on mouse move
      function attachParallax(){
        const hero = document.querySelector('.hero');
        if(!hero) return;
        hero.addEventListener('mousemove', e=>{
          const rect = hero.getBoundingClientRect();
          const x = (e.clientX - rect.left)/rect.width - 0.5;
          const y = (e.clientY - rect.top)/rect.height - 0.5;
          const hs = document.querySelector('.headshot');
          if(hs) hs.style.transform = `translate3d(${x*10}px,${y*-10}px,0) scale(1.01)`;
        });
        hero.addEventListener('mouseleave', ()=>{
          const hs = document.querySelector('.headshot');
          if(hs) hs.style.transform = '';
        });
      }
      document.addEventListener('DOMContentLoaded',()=>{animateCounters();attachParallax();});
    </script>
  </head>
  <body>
    <div class="wrap">
      <header style="display:flex;justify-content:space-between;align-items:center;gap:20px;margin-bottom:18px">
        <div>
          <h1 style="margin:0;font-size:28px">okey</h1>
          <div style="color:var(--muted);font-size:14px">A modern viewer for your NHL dataset</div>
        </div>
        <nav>
          <a href="/players" style="margin-right:10px;color:var(--muted);text-decoration:none">Players</a>
          <a href="/teams" style="margin-right:10px;color:var(--muted);text-decoration:none">Teams</a>
          <a href="/headshots/" style="color:var(--muted);text-decoration:none">Headshots</a>
        </nav>
      </header>

      <main style="display:grid;grid-template-columns:1fr;gap:24px;align-items:center">
        <section class="panel" style="padding:40px;border-radius:20px;position:relative;overflow:hidden">
          <!-- Hero video: looks for /static/hero.mp4 locally, falls back to a remote sample if not available -->
          <div class="video-wrap" aria-hidden="true" style="position:absolute;inset:0;z-index:0;overflow:hidden;border-radius:20px">
            <video id="heroVideo" playsinline muted autoplay loop preload="auto" poster="/static/hero.jpg" style="width:100%;height:100%;object-fit:cover;filter:brightness(.46) contrast(1.05);">
              <source src="/static/hero.mp4" type="video/mp4">
              <!-- reliable public fallback -->
              <source src="https://interactive-examples.mdn.mozilla.net/media/cc0-videos/flower.mp4" type="video/mp4">
              Your browser does not support the video tag.
            </video>
            <div id="videoFallback" style="position:absolute;inset:0;display:none;align-items:center;justify-content:center;z-index:3">
              <div style="background:rgba(2,6,12,0.6);color:#cfe8ff;padding:18px;border-radius:12px;max-width:420px;text-align:center">Video not available â€” using static hero image. To use a local video, place <code>hero.mp4</code> in <code>app/static/</code>.</div>
            </div>
          </div>
          <div style="position:absolute;inset:0;background:linear-gradient(180deg,rgba(3,11,20,0.35),rgba(3,11,20,0.55));z-index:1;border-radius:20px"></div>
          <div style="position:relative;z-index:2;display:flex;flex-direction:column;gap:18px;max-width:820px">
            <h2 style="margin:0;font-size:40px;line-height:1.02;letter-spacing:-0.02em">Browse NHL data with style</h2>
            <p style="margin:0;color:var(--muted);font-size:16px">Explore players, teams, and media from your local collection. Built to be fast, private, and beautiful â€” with smooth animations.</p>
            <div style="display:flex;gap:12px;margin-top:12px">
              <a href="/players" style="padding:12px 16px;border-radius:12px;background:linear-gradient(90deg,var(--accent),#7de2ff);color:#012034;text-decoration:none;font-weight:700">Get Started</a>
              <a href="/teams" style="padding:12px 16px;border-radius:12px;border:1px solid rgba(255,255,255,0.06);color:var(--muted);text-decoration:none">View Standings</a>
            </div>
          </div>
        </section>

        <section style="display:flex;gap:16px;flex-wrap:wrap">
          <div class="card panel" style="flex:1;min-width:220px">
            <h4 style="margin:0 0 8px 0">Fast Search</h4>
            <p style="margin:0;color:var(--muted)">Instantly find players by name or id, then open detailed pages with awards and stats.</p>
          </div>
          <div class="card panel" style="flex:1;min-width:220px">
            <h4 style="margin:0 0 8px 0">Media Ready</h4>
            <p style="margin:0;color:var(--muted)">Use remote headshots or place local images in <code>stats/headshots</code> to serve them directly.</p>
          </div>
          <div class="card panel" style="flex:1;min-width:220px">
            <h4 style="margin:0 0 8px 0">Minigames</h4>
            <p style="margin:0;color:var(--muted)">Future: prediction & trivia games powered by your dataset.</p>
          </div>
        </section>

        {%- if hot_players %}
        <section class="panel" style="margin-top:18px;">
          <h3 style="margin:0 0 12px 0">ðŸŒ¶</h3>
          <div style="display:flex;gap:12px;flex-wrap:wrap">
            {% for h in hot_players %}
            <div style="flex:1;min-width:220px;background:linear-gradient(180deg,rgba(255,255,255,0.01),transparent);padding:12px;border-radius:12px;border:1px solid rgba(255,255,255,0.03);">
              <div style="display:flex;gap:12px;align-items:center">
                <img src="{{ h.headshot }}" alt="{{ h.player.get('name') }}" style="width:64px;height:64px;border-radius:10px;object-fit:cover;background:#071028;">
                <div style="flex:1">
                  <div style="font-weight:800">{{ h.player.get('name') }}</div>
                  <div style="color:var(--muted);font-size:13px">{{ h.player.get('team') or h.player.get('teamName') or h.player.get('teamAbbrev') }}</div>
                </div>
                {% if h.team_logo %}
                <img src="{{ h.team_logo }}" alt="team" style="width:40px;height:32px;object-fit:contain;opacity:.95">
                {% endif %}
              </div>
              <div style="display:flex;gap:8px;margin-top:12px;text-align:center">
                <div style="flex:1"><div style="font-weight:800">{{ h.games }}</div><div style="color:var(--muted);font-size:12px">GP</div></div>
                <div style="flex:1"><div style="font-weight:800">{{ h.goals }}</div><div style="color:var(--muted);font-size:12px">G</div></div>
                <div style="flex:1"><div style="font-weight:800">{{ h.assists }}</div><div style="color:var(--muted);font-size:12px">A</div></div>
                <div style="flex:1"><div style="font-weight:800">{{ h.points }}</div><div style="color:var(--muted);font-size:12px">PTS</div></div>
              </div>
            </div>
            {% endfor %}
          </div>
        </section>
        {%- endif %}
      </main>
    </div>
    <script>
      // show fallback if video fails to load
      (function(){
        const v = document.getElementById('heroVideo');
        const fallback = document.getElementById('videoFallback');
        if(!v) return;
        function showFallback(){
          if(fallback) fallback.style.display = 'flex';
          v.style.display = 'none';
        }
        v.addEventListener('error', ()=>{ console.warn('Hero video error'); showFallback(); });
        v.addEventListener('stalled', ()=>{ console.warn('Hero video stalled'); });
        // if video doesn't have enough data after 3s, show fallback
        setTimeout(()=>{
          try{ if(v.readyState < 3) showFallback(); }catch(e){}
        }, 3000);
      })();
    </script>
  </body>
</html>
